<!DOCTYPE html>
<html class="html-borde">
<head class="encabezado">
    <link rel="stylesheet" href="style.css">
    <title>Biblioteca - Gestión de Libros</title>
    <style>
        .formulario-tabla {
            margin: 20px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        
        .formulario-tabla input, .formulario-tabla button, .formulario-tabla select {
            margin: 5px;
            padding: 8px;
        }
        
        .tabla-datos {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .tabla-datos th, .tabla-datos td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        .tabla-datos th {
            background-color: #f2f2f2;
        }
        
        .mensaje {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        
        .exito {
            background-color: #dff0d8;
            color: #3c763d;
        }
        
        .error {
            background-color: #f2dede;
            color: #a94442;
        }
        
        .disponible {
            color: green;
            font-weight: bold;
        }
        
        .no-disponible {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="fondo">
        <div class="rectangulo-titulo">
            <h1 class="titulo">Biblioteca Central</h1>
        </div>
        <div class="menu-container">
            <a href="{{ url_for('index') }}" class="menu-item active">Catálogo</a>
            <a href="#" class="menu-item">Autores</a>
            <a href="#" class="menu-item">Préstamos</a>
            <a href="#" class="menu-item">Contacto</a>
        </div>
        <div class="cuerpo">
            {% if mensaje %}
                <div class="mensaje {{ mensaje.tipo }}">{{ mensaje.texto }}</div>
            {% endif %}
            
            <h2>Catálogo de Libros</h2>
            <div class="tabla-container">
                <table class="tabla-datos">
                    <tr>
                        {% for encabezado in datos_tablas['libros_completos'].encabezados %}
                            <th>{{ encabezado }}</th>
                        {% endfor %}
                    </tr>
                    {% for fila in datos_tablas['libros_completos'].filas %}
                        <tr>
                            {% for campo, valor in fila.items() %}
                                <td>
                                    {% if campo == 'disponible' %}
                                        {% if valor %}
                                            <span class="disponible">Disponible</span>
                                        {% else %}
                                            <span class="no-disponible">Prestado</span>
                                        {% endif %}
                                    {% else %}
                                        {{ valor }}
                                    {% endif %}
                                </td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </table>
            </div>
            
            <h2>Autores</h2>
            <div class="tabla-container">
                <table class="tabla-datos">
                    <tr>
                        {% for encabezado in datos_tablas['autores'].encabezados %}
                            <th>{{ encabezado }}</th>
                        {% endfor %}
                    </tr>
                    {% for fila in datos_tablas['autores'].filas %}
                        <tr>
                            {% for valor in fila %}
                                <td>{{ valor }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </table>
            </div>
            
            <h2>Préstamos</h2>
            <div class="tabla-container">
                <table class="tabla-datos">
                    <tr>
                        {% for encabezado in datos_tablas['prestamos'].encabezados %}
                            <th>{{ encabezado }}</th>
                        {% endfor %}
                    </tr>
                    {% for fila in datos_tablas['prestamos'].filas %}
                        <tr>
                            {% for valor in fila %}
                                <td>{{ valor }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </table>
            </div>
            
            <!-- Sección de administración -->
            <h2>Administración</h2>
            <div class="formulario-tabla">
                <h3>Registrar Nuevo Libro</h3>
                <form method="POST" action="{{ url_for('index') }}">
                    <input type="text" name="titulo" placeholder="Título" required>
                    <select name="id_autor" required>
                        <option value="">Seleccione autor</option>
                        {% for autor in datos_tablas['autores'].filas %}
                            <option value="{{ autor['id'] }}">{{ autor['nombre'] }}</option>
                        {% endfor %}
                    </select>
                    <input type="text" name="genero" placeholder="Género">
                    <input type="number" name="año" placeholder="Año publicación">
                    <input type="text" name="isbn" placeholder="ISBN">
                    <button type="submit" name="nuevo_libro">Registrar Libro</button>
                </form>
            </div>
        </div>
        <nav class="margen"></nav>
    </div>
</body>
</html>